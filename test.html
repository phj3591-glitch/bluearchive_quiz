<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ëˆ„êµ¬ì˜ R18íŒ¬ì•„íŠ¸ê°€ ë” ë§ì„ê¹Œ?</title>
  <style>
    :root {
      --bg: #0f172a;       /* slate-900 */
      --card: #111827;     /* gray-900 */
      --text: #e5e7eb;     /* gray-200 */
      --muted: #9ca3af;    /* gray-400 */
      --accent: #22c55e;   /* green-500 */
      --danger: #ef4444;   /* red-500 */
      --brand: #6366f1;    /* indigo-500 */
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --radius: 16px;
    }
    * { box-sizing: border-box }
    html, body { height: 100%; }
    body {
      margin: 0; background: radial-gradient(1200px 600px at 80% -10%, #1e293b 0%, #0b1222 40%, #060b15 70%, #05070f 100%), var(--bg);
      color: var(--text); font-family: system-ui, -apple-system, Segoe UI, Roboto, Apple SD Gothic Neo, Noto Sans KR, sans-serif;
      display: flex; align-items: center; justify-content: center; padding: 24px;
    }
    .app {
      width: min(1100px, 100%);
      display: grid; gap: 16px;
      grid-template-rows: auto 1fr auto;
      min-height: min(780px, 92vh);
    }
    header {
      display: flex; align-items: center; justify-content: space-between; gap: 12px;
      background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
      padding: 14px 18px; border: 1px solid rgba(255,255,255,.06); border-radius: var(--radius);
      box-shadow: var(--shadow);
    }
    .brand { font-weight: 800; letter-spacing: .3px; display: flex; align-items: baseline; gap: 10px; }
    .brand span { font-size: 15px; color: var(--muted); font-weight: 600; }
    .stats { display: flex; gap: 12px; flex-wrap: wrap; }
    .badge {
      background: #0b1222; border: 1px solid rgba(255,255,255,.08); color: var(--text);
      padding: 8px 12px; border-radius: 999px; font-weight: 700; letter-spacing:.2px
    }
    .wrap {
      display: grid; grid-template-columns: 1fr 1fr; gap: 16px;
    }
    .card {
      position: relative; overflow: hidden; border-radius: var(--radius);
      background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
      border: 1px solid rgba(255,255,255,.06); box-shadow: var(--shadow);
      cursor: pointer; transform: translateZ(0);
    }
    .card[aria-disabled="true"] { pointer-events: none; }
    .frame {
      position: relative; width: 100%; aspect-ratio: 4/3; background:#0b1222; display:grid; place-items:center;
    }
    .frame img { width: 100%; height: 100%; object-fit: cover; display:block; }
    .title {
      position: absolute; left: 12px; bottom: 12px; background: rgba(0,0,0,.5);
      padding: 6px 10px; border-radius: 8px; font-weight: 700; backdrop-filter: blur(4px);
    }
    .number-chip {
      position: absolute; top: 12px; right: 12px; padding: 6px 10px; border-radius: 999px; font-weight: 800;
      background: rgba(255,255,255,.08); border: 1px solid rgba(255,255,255,.1); color: var(--muted);
      user-select: none;
    }
    .reveal .number-chip { color: #fff; background: rgba(34,197,94,.2); border-color: rgba(34,197,94,.4);}
    .card.correct { outline: 3px solid var(--accent); }
    .card.wrong   { outline: 3px solid var(--danger); filter: grayscale(.4); }
    .hint { text-align: center; color: var(--muted); margin-top: 6px; font-size: 14px }
    footer {
      display: flex; align-items: center; justify-content: space-between; gap: 12px; flex-wrap: wrap;
    }
    .btn {
      background: linear-gradient(180deg, #1f2937, #0f172a);
      border: 1px solid rgba(255,255,255,.08);
      color: #fff; padding: 12px 16px; border-radius: 12px; font-weight: 800; letter-spacing:.2px;
      cursor: pointer; transition: .15s transform ease, .15s filter ease;
    }
    .btn:hover { transform: translateY(-1px); }
    .btn.primary { background: linear-gradient(180deg, #6d28d9, #4f46e5); border-color: rgba(255,255,255,.12); }
    .btn.ghost { background: transparent; border: 1px dashed rgba(255,255,255,.18); color: var(--muted); }
    .overlay {
      position: fixed; inset: 0; display: none; place-items: center; padding: 24px;
      background: rgba(5,7,15,.72); backdrop-filter: blur(6px);
    }
    .overlay.show { display: grid; }
    .dialog {
      width: min(640px, 96%); background: #0b1222; border: 1px solid rgba(255,255,255,.08);
      border-radius: 18px; box-shadow: var(--shadow); padding: 20px; text-align: center;
    }
    .dialog h2 { margin: 8px 0 6px; }
    .dialog p { color: var(--muted); margin: 0 0 14px }
    .kbd { font-family: ui-monospace, SFMono-Regular, Menlo, monospace; font-weight: 700; font-size: 12px;
           border: 1px solid rgba(255,255,255,.2); background: rgba(255,255,255,.05); padding: 2px 6px; border-radius: 6px; }
    @media (max-width: 860px) {
      .wrap { grid-template-columns: 1fr; }
      .frame { aspect-ratio: 1/1; }
    }
  </style>
</head>
<body>
  <div class="app">
    <header>
      <div class="brand">ğŸ“ˆ High or Higher <span>â€” ìˆ«ì ë” ë†’ì€ ì‚¬ì§„ ê³ ë¥´ê¸°</span></div>
      <div class="stats">
        <div class="badge" id="score">ì ìˆ˜ 0</div>
        <div class="badge" id="streak">ì—°ì† 0</div>
        <div class="badge" id="best">ìµœê³  0</div>
      </div>
    </header>

    <main class="wrap" aria-live="polite">
      <article class="card" id="leftCard" tabindex="0" role="button" aria-label="ì™¼ìª½ ì¹´ë“œ">
        <div class="frame">
          <img id="leftImg" alt="">
          <div class="title" id="leftTitle"></div>
          <div class="number-chip" id="leftNum">?</div>
        </div>
      </article>

      <article class="card" id="rightCard" tabindex="0" role="button" aria-label="ì˜¤ë¥¸ìª½ ì¹´ë“œ">
        <div class="frame">
          <img id="rightImg" alt="">
          <div class="title" id="rightTitle"></div>
          <div class="number-chip" id="rightNum">?</div>
        </div>
      </article>
    </main>

    <div class="hint">
      ì‚¬ì§„ì„ í´ë¦­í•˜ê±°ë‚˜ <span class="kbd">â†</span>/<span class="kbd">â†’</span> í‚¤ë¡œ ì„ íƒí•˜ì„¸ìš”.
      (ë””ë²„ê·¸ ìˆ«ì í‘œì‹œ: <span class="kbd">D</span>)
    </div>

    <footer>
      <div />
      <div style="display:flex; gap:10px">
        <button class="btn ghost" id="skipBtn" title="ë™ì /ì• ë§¤í•˜ë©´ ìƒˆ ë¼ìš´ë“œ">ê±´ë„ˆë›°ê¸°</button>
        <button class="btn primary" id="restartBtn">ë‹¤ì‹œ ì‹œì‘</button>
      </div>
    </footer>
  </div>

  <!-- ê²Œì„ì˜¤ë²„ -->
  <div class="overlay" id="gameover">
    <div class="dialog">
      <h2>ê²Œì„ ì˜¤ë²„ ğŸ˜µ</h2>
      <p id="summary">ìŠ¤ì½”ì–´ ìš”ì•½</p>
      <div style="display:flex; gap:10px; justify-content:center; margin-top:10px">
        <button class="btn" id="againBtn">ë‹¤ì‹œ ë„ì „</button>
        <button class="btn ghost" id="closeBtn">ë‹«ê¸°</button>
      </div>
    </div>
  </div>

  <script>
    // ===== 1) ì—¬ê¸°ë¥¼ ë‹¹ì‹  ë°ì´í„°ë¡œë§Œ ë°”ê¾¸ë©´ ë©ë‹ˆë‹¤! =====
    // images/ í´ë”ì— íŒŒì¼ì„ ë„£ê³ , valueì— "ìˆ«ì"ë¥¼ ì ìœ¼ì„¸ìš”.
    const DATASET = [
      { src: "images\ë…¸ë…¸ë¯¸.png", title: "ë…¸ë…¸ë¯¸", value: 12 },
      { src: "images\ë…¸ì¡°ë¯¸.png", title: "ë…¸ì¡°ë¯¸", value: 47 },
      { src: "images\ë¯¸ì‚¬í‚¤.png", title: "ë¯¸ì‚¬í‚¤", value: 33 },
      { src: "images\ì´ë¶€í‚¤.png", title: "ì´ë¶€í‚¤", value: 88 },
      { src: "images\ì¹´ìŠ¤ë¯¸.png", title: "ì¹´ìŠ¤ë¯¸", value: 5  },
    ];
    // ===============================================

    // ì˜µì…˜: ìˆ«ì ë¯¸ë¦¬ë³´ê¸°(ë””ë²„ê·¸). ì‹¤í–‰ ì¤‘ D í‚¤ë¡œ í† ê¸€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    let showNumbers = false;

    // ìƒíƒœ
    let left, right;         // í˜„ì¬ ë¼ìš´ë“œ ë‘ ì¹´ë“œ
    let score = 0;
    let streak = 0;
    let best = Number(localStorage.getItem("higher_best") || 0);
    let locked = false;      // íŒì • ì¤‘ í´ë¦­ ë°©ì§€

    // DOM
    const el = (id) => document.getElementById(id);
    const scoreEl  = el("score");
    const streakEl = el("streak");
    const bestEl   = el("best");
    const leftCard = el("leftCard");
    const rightCard= el("rightCard");
    const leftImg  = el("leftImg");
    const rightImg = el("rightImg");
    const leftTitle= el("leftTitle");
    const rightTitle=el("rightTitle");
    const leftNum  = el("leftNum");
    const rightNum = el("rightNum");
    const skipBtn  = el("skipBtn");
    const restartBtn=el("restartBtn");
    const overlay  = el("gameover");
    const againBtn = el("againBtn");
    const closeBtn = el("closeBtn");
    const summary  = el("summary");

    // ìœ í‹¸
    const randPair = () => {
      if (DATASET.length < 2) throw new Error("DATASETì— ìµœì†Œ 2ê°œ ì´ìƒì˜ í•­ëª©ì´ í•„ìš”í•©ë‹ˆë‹¤.");
      let i = Math.floor(Math.random() * DATASET.length);
      let j = Math.floor(Math.random() * (DATASET.length - 1));
      if (j >= i) j += 1;
      return [DATASET[i], DATASET[j]];
    };
    const preload = (srcs) => srcs.forEach(s => { const img = new Image(); img.src = s; });

    // UI ì—…ë°ì´íŠ¸
    function updateStats() {
      scoreEl.textContent  = `ì ìˆ˜ ${score}`;
      streakEl.textContent = `ì—°ì† ${streak}`;
      bestEl.textContent   = `ìµœê³  ${best}`;
    }
    function setCard(side, item) {
      const img   = side === "left" ? leftImg   : rightImg;
      const title = side === "left" ? leftTitle : rightTitle;
      const chip  = side === "left" ? leftNum   : rightNum;
      img.src = item.src;
      img.alt = item.title || "ì‚¬ì§„";
      title.textContent = item.title || "";
      chip.textContent = showNumbers ? item.value : "?";
    }
    function clearEffects() {
      [leftCard, rightCard].forEach(c => {
        c.classList.remove("correct","wrong","reveal");
        c.setAttribute("aria-disabled","false");
      });
    }

    // ë¼ìš´ë“œ ì‹œì‘
    function nextRound(force = false) {
      if (locked && !force) return;
      clearEffects();
      [left, right] = randPair();
      // ë™ì  ë°©ì§€: valueê°€ ê°™ìœ¼ë©´ ë‹¤ì‹œ ë½‘ê¸°
      let guard = 0;
      while (left.value === right.value && guard++ < 50) {
        [left, right] = randPair();
      }
      setCard("left", left);
      setCard("right", right);
      preload([left.src, right.src]);
    }

    // íŒì •
    function choose(which) {
      if (locked) return;
      locked = true;

      const pick = which === "left" ? left : right;
      const other= which === "left" ? right: left;

      // ìˆ«ì ë“œëŸ¬ë‚´ê¸°
      [leftCard, rightCard].forEach(c => c.classList.add("reveal"));
      leftNum.textContent  = left.value;
      rightNum.textContent = right.value;

      const isCorrect = pick.value > other.value;

      const pickedCard = which === "left" ? leftCard : rightCard;
      const otherCard  = which === "left" ? rightCard: leftCard;

      pickedCard.classList.add(isCorrect ? "correct" : "wrong");
      otherCard.classList.add(isCorrect ? "wrong"   : "correct");
      [leftCard, rightCard].forEach(c => c.setAttribute("aria-disabled","true"));

      setTimeout(() => {
        if (isCorrect) {
          score += 1;
          streak += 1;
          updateStats();
          locked = false;
          nextRound(true);
        } else {
          gameOver();
        }
      }, 700);
    }

    function gameOver() {
      if (score > best) {
        best = score;
        localStorage.setItem("higher_best", String(best));
      }
      updateStats();
      summary.textContent = `ì´ë²ˆ ì ìˆ˜ ${score} â€¢ ì—°ì† ${streak} â€¢ ìµœê³ ê¸°ë¡ ${best}`;
      overlay.classList.add("show");
    }

    function restart() {
      score = 0;
      streak = 0;
      locked = false;
      overlay.classList.remove("show");
      updateStats();
      nextRound(true);
    }

    // ì´ë²¤íŠ¸
    leftCard.addEventListener("click",  () => choose("left"));
    rightCard.addEventListener("click", () => choose("right"));
    skipBtn.addEventListener("click",   () => { if (!locked) nextRound(true); });
    restartBtn.addEventListener("click",restart);
    againBtn.addEventListener("click",  restart);
    closeBtn.addEventListener("click",  () => overlay.classList.remove("show"));

    window.addEventListener("keydown", (e) => {
      if (e.key === "ArrowLeft")  choose("left");
      if (e.key === "ArrowRight") choose("right");
      if (e.key?.toLowerCase() === "r") restart();
      if (e.key?.toLowerCase() === "d") {
        showNumbers = !showNumbers;
        leftNum.textContent  = showNumbers ? (left?.value ?? "?") : "?";
        rightNum.textContent = showNumbers ? (right?.value ?? "?") : "?";
      }
    });

    // ì´ˆê¸°í™”
    (function init() {
      best = Number(localStorage.getItem("higher_best") || 0);
      updateStats();
      nextRound(true);
    })();
  </script>
</body>
</html>
