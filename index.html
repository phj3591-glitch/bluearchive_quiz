<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ëˆ„êµ¬ì˜ R18íŒ¬ì•„íŠ¸ê°€ ë” ë§ì„ê¹Œ?</title>
  <style>
    :root {
      --bg: #0f172a;       /* slate-900 */
      --card: #111827;     /* gray-900 */
      --text: #e5e7eb;     /* gray-200 */
      --muted: #9ca3af;    /* gray-400 */
      --accent: #22c55e;   /* green-500 */
      --danger: #ef4444;   /* red-500 */
      --brand: #6366f1;    /* indigo-500 */
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --radius: 16px;
    }
    * { box-sizing: border-box }
    html, body { height: 100%; }
    body {
      margin: 0;
      background: radial-gradient(1200px 600px at 80% -10%, #1e293b 0%, #0b1222 40%, #060b15 70%, #05070f 100%), var(--bg);
      color: var(--text);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Apple SD Gothic Neo, Noto Sans KR, sans-serif;
      display: flex; align-items: center; justify-content: center;
      padding: 24px;
    }
    .app {
      width: min(1100px, 100%);
      display: grid; gap: 16px;
      grid-template-rows: auto 1fr auto;
      min-height: min(780px, 92vh);
    }
    header {
      display: flex; align-items: center; justify-content: space-between; gap: 12px;
      background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
      padding: 14px 18px;
      border: 1px solid rgba(255,255,255,.06);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
    }
    .brand { font-weight: 800; letter-spacing: .3px; display: flex; align-items: baseline; gap: 10px; }
    .brand span { font-size: 15px; color: var(--muted); font-weight: 600; }
    .stats { display: flex; gap: 12px; flex-wrap: wrap; }
    .badge {
      background: #0b1222;
      border: 1px solid rgba(255,255,255,.08);
      color: var(--text);
      padding: 8px 12px;
      border-radius: 999px;
      font-weight: 700; letter-spacing:.2px
    }
    .wrap { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; }
    .card {
      position: relative; overflow: hidden; border-radius: var(--radius);
      background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
      border: 1px solid rgba(255,255,255,.06);
      box-shadow: var(--shadow);
      cursor: pointer; transform: translateZ(0);
    }
    .card[aria-disabled="true"] { pointer-events: none; }
    .frame {
      position: relative; width: 100%; aspect-ratio: 4/3;
      background:#0b1222; display:grid; place-items:center;
    }
    .frame img { width: 100%; height: 100%; object-fit: cover; display:block; }
    .title {
      position: absolute; left: 12px; bottom: 12px;
      background: rgba(0,0,0,.5); padding: 6px 10px; border-radius: 8px;
      font-weight: 700; backdrop-filter: blur(4px);
    }


    .number-chip {
      position: absolute; top: 12px; right: 12px;
      padding: 8px 14px; border-radius: 999px; font-weight: 900; font-size: 22px; letter-spacing:.3px;
      background: rgba(11,18,34,.6);
      border: 1.5px solid rgba(255,255,255,.22);
      color: #e5e7eb; user-select: none; backdrop-filter: blur(6px);
      text-shadow: 0 1px 2px rgba(0,0,0,.7);
      box-shadow: 0 4px 14px rgba(0,0,0,.35), inset 0 0 0 1px rgba(255,255,255,.05);
      transform-origin: center;
      transition: transform .15s ease, background .15s ease, color .15s ease, border-color .15s ease;
    }


    .number-center{
      position:absolute; inset:0; display:grid; place-items:center;
      font-weight:900; font-size:clamp(36px, 9vw, 92px); letter-spacing:.5px; color:#ffffff;
      opacity:0; transform:scale(.8);
      transition:opacity .2s ease, transform .2s ease;
      text-shadow: 0 2px 6px rgba(0,0,0,.55), 0 0 18px rgba(0,0,0,.35);
      pointer-events: none;
    }
    .reveal .number-center{ opacity:1; transform:scale(1); }
    .reveal.correct .number-center{ filter: drop-shadow(0 0 10px rgba(34,197,94,.45)); }
    .reveal.wrong .number-center{ filter: drop-shadow(0 0 10px rgba(239,68,68,.45)); }

    .reveal .number-chip {
      color: #fff;
      background: linear-gradient(180deg, rgba(34,197,94,.28), rgba(34,197,94,.18));
      border-color: rgba(34,197,94,.55);
      animation: pop .22s ease-out;
    }
    @keyframes pop { 0% { transform: scale(0.7); opacity:.6 } 100% { transform: scale(1); opacity:1 } }

    .card.correct { outline: 3px solid var(--accent); }
    .card.wrong { outline: 3px solid var(--danger); filter: grayscale(.4); }

    .hint { text-align: center; color: var(--muted); margin-top: 6px; font-size: 14px }

    footer { display: flex; align-items: center; justify-content: space-between; gap: 12px; flex-wrap: wrap; }
    .btn {
      background: linear-gradient(180deg, #1f2937, #0f172a);
      border: 1px solid rgba(255,255,255,.08);
      color: #fff; padding: 12px 16px; border-radius: 12px;
      font-weight: 800; letter-spacing:.2px; cursor: pointer;
      transition: .15s transform ease, .15s filter ease;
    }
    .btn:hover { transform: translateY(-1px); }
    .btn.primary { background: linear-gradient(180deg, #6d28d9, #4f46e5); border-color: rgba(255,255,255,.12); }
    .btn.ghost { background: transparent; border: 1px dashed rgba(255,255,255,.18); color: var(--muted); }

    .overlay {
      position: fixed; inset: 0; display: none; place-items: center; padding: 24px;
      background: rgba(5,7,15,.72); backdrop-filter: blur(6px);
      z-index: 50;
    }
    .overlay.show { display: grid; }
    .dialog {
      width: min(640px, 96%); background: #0b1222;
      border: 1px solid rgba(255,255,255,.08);
      border-radius: 18px; box-shadow: var(--shadow);
      padding: 20px; text-align: center;
    }
    .dialog h2, .dialog h1 { margin: 8px 0 6px; }
    .dialog p { color: var(--muted); margin: 0 0 14px }

    .kbd {
      font-family: ui-monospace, SFMono-Regular, Menlo, monospace;
      font-weight: 700; font-size: 12px;
      border: 1px solid rgba(255,255,255,.2);
      background: rgba(255,255,255,.05);
      padding: 2px 6px; border-radius: 6px;
    }

    
    @media (max-width: 860px) {
      .wrap { grid-template-columns: 1fr; }
      .frame { aspect-ratio: 1/1; }
      .number-chip { font-size: 20px; padding: 8px 12px; }
    }
  </style>
</head>
<body>

  <div class="overlay show" id="intro" aria-hidden="false">
    <div class="dialog">
      <h1 id="introTitle">R18 íŒ¬ì•„íŠ¸ê°€ ë§ì€ ìºë¦­í„°ëŠ”?</h1>
      <p id="introDesc">ë¸”ë£¨ì•„ì¹´ì´ë¸Œ ìºë¦­í„°ë§Œ ë“±ì¥í•©ë‹ˆë‹¤. ì¼ì„­ ìŠ¤í¬ì£¼ì˜.</p>
      <div style="margin-top:12px; color:var(--muted); font-size:14px">
        ì¡°ì‘: <span class="kbd">â†</span>/<span class="kbd">â†’</span> ì„ íƒ, <span class="kbd">Enter</span>/<span class="kbd">Space</span> ì§„í–‰
      </div>
      <div style="display:flex; gap:10px; justify-content:center; margin-top:14px">
        <button class="btn primary" id="startBtn">ê²Œì„ ì‹œì‘</button>
        <button class="btn ghost" id="justSeeBtn">ê·œì¹™ ë³´ê¸°</button>
      </div>
    </div>
  </div>


  <div class="app" aria-hidden="true" id="appRoot">
    <header>
      <div class="brand"> ë¸”ë£¨ì•„ì¹´ì´ë¸Œ <span>â€” íŒ¬ì•„íŠ¸ ë” ë§ì€ ìºë¦­í„° ê³ ë¥´ê¸°</span></div>
      <div class="stats">
        <div class="badge" id="score">ì ìˆ˜ 0</div>
        <div class="badge" id="streak">ì—°ì† 0</div>
        <div class="badge" id="best">ìµœê³  0</div>
      </div>
    </header>

    <main class="wrap" aria-live="polite">
      <article class="card" id="leftCard" tabindex="0" role="button" aria-label="ì™¼ìª½ ì¹´ë“œ">
        <div class="frame">
          <img id="leftImg" alt="">
          <div class="title" id="leftTitle"></div>
          <div class="number-chip" id="leftNum">?</div>
          <div class="number-center" id="leftNumBig">?</div>
        </div>
      </article>

      <article class="card" id="rightCard" tabindex="0" role="button" aria-label="ì˜¤ë¥¸ìª½ ì¹´ë“œ">
        <div class="frame">
          <img id="rightImg" alt="">
          <div class="title" id="rightTitle"></div>
          <div class="number-chip" id="rightNum">?</div>
          <div class="number-center" id="rightNumBig">?</div>
        </div>
      </article>
    </main>

    <div class="hint">
      ì‚¬ì§„ì„ í´ë¦­í•˜ê±°ë‚˜ <span class="kbd">â†</span>/<span class="kbd">â†’</span> í‚¤ë¡œ ì„ íƒí•˜ì„¸ìš”.
    </div>

    <footer>
      <div></div>
      <div style="display:flex; gap:10px">
        <button class="btn ghost" id="skipBtn" title="ë™ì /ì• ë§¤í•˜ë©´ ìƒˆ ë¼ìš´ë“œ">
        <button class="btn primary" id="restartBtn">ë‹¤ì‹œ ì‹œì‘</button>
      </div>
    </footer>
  </div>


  <div class="overlay" id="gameover" aria-hidden="true">
    <div class="dialog">
      <h2>ê²Œì„ ì˜¤ë²„ ğŸ˜µ</h2>
      <p id="summary">ìŠ¤ì½”ì–´ ìš”ì•½</p>
      <div style="display:flex; gap:10px; justify-content:center; margin-top:10px">
        <button class="btn" id="againBtn">ë‹¤ì‹œ ë„ì „</button>
        <button class="btn ghost" id="closeBtn">ë‹«ê¸°</button>
      </div>
    </div>
  </div>

  <script>
    const DATASET = [
       { src: "images/í˜¸ì‹œë…¸.webp", title: "í˜¸ì‹œë…¸", value: 8901 },
      { src: "images/ìœ ìš°ì¹´.webp", title: "ìœ ìš°ì¹´", value: 13319 },
      { src: "images/ì•„ìŠ¤ë‚˜.webp", title: "ì•„ìŠ¤ë‚˜", value: 17458 },
      { src: "images/íˆë‚˜.webp", title: "íˆë‚˜", value: 7965 },
      { src: "images/ë¯¸ì¹´.webp", title: "ë¯¸ì¹´", value: 8210 },
      { src: "images/ì‹œë¡œì½”.webp", title: "ì‹œë¡œì½”", value: 7950 },
      { src: "images/ì•„ë¦¬ìŠ¤.webp", title: "ì•„ë¦¬ìŠ¤", value: 4983 },
      { src: "images/í† í‚¤.webp", title: "í† í‚¤", value: 9149 },
      { src: "images/ë§ˆë¦¬.webp", title: "ë§ˆë¦¬", value: 7756 },
      { src: "images/ì¹´ìš”ì½”.webp", title: "ì¹´ìš”ì½”", value: 3520 },
      { src: "images/ì½”í•˜ë£¨.webp", title: "ì½”í•˜ë£¨", value: 4879 },
      { src: "images/ì•„ë£¨.webp", title: "ì•„ë£¨", value: 5051 },
      { src: "images/ì¹´ì¦ˆì‚¬.webp", title: "ì¹´ì¦ˆì‚¬", value: 5402 },
      { src: "images/í‚¤ì‚¬í‚¤.webp", title: "í‚¤ì‚¬í‚¤", value: 7054 },
      { src: "images/ë¦¬ì˜¤.webp", title: "ë¦¬ì˜¤", value: 11631 },
      { src: "images/ì„¸ì´ì•„.webp", title: "ì„¸ì´ì•„", value: 4675 },
      { src: "images/ì•„ë¡œë‚˜.webp", title: "ì•„ë¡œë‚˜", value: 4573 },
      { src: "images/ë…¸ì•„.webp", title: "ë…¸ì•„", value: 6050 },
      { src: "images/ëª¨ëª¨ì´.webp", title: "ëª¨ëª¨ì´", value: 3479 },
      { src: "images/ì•„ì½”.webp", title: "ì•„ì½”", value: 7009 },
      { src: "images/í•˜ë‚˜ì½”.webp", title: "í•˜ë‚˜ì½”", value: 5387 },
      { src: "images/ì¹´ë¦°.webp", title: "ì¹´ë¦°", value: 7861 },
      { src: "images/í•˜ìŠ¤ë¯¸.webp", title: "í•˜ìŠ¤ë¯¸", value: 6130 },
      { src: "images/í”„ë¼ë‚˜.webp", title: "í”„ë¼ë‚˜", value: 4363 },
      { src: "images/ë¯¸ë„ë¦¬.webp", title: "ë¯¸ë„ë¦¬", value: 3351 },
      { src: "images/ì¹¸ë‚˜.webp", title: "ì¹¸ë‚˜", value: 3521 },
      { src: "images/ë¬´ì¸ í‚¤.webp", title: "ë¬´ì¸ í‚¤", value: 3974 },
      { src: "images/íˆí›„ë¯¸.webp", title: "íˆí›„ë¯¸", value: 2650 },
      { src: "images/ë„¤ë£¨.webp", title: "ë„¤ë£¨", value: 3048 },
      { src: "images/ë¯¸ìœ .webp", title: "ë¯¸ìœ ", value: 3319 },
      { src: "images/ì‚¬ì˜¤ë¦¬.webp", title: "ì‚¬ì˜¤ë¦¬", value: 3161 },
      { src: "images/ìš°ì´.webp", title: "ìš°ì´", value: 2918 },
      { src: "images/ë…¸ë…¸ë¯¸.webp", title: "ë…¸ë…¸ë¯¸", value: 5006 },
      { src: "images/ë¯¸ì•¼ì½”.webp", title: "ë¯¸ì•¼ì½”", value: 3100 },
      { src: "images/ì´ì¦ˆë‚˜.webp", title: "ì´ì¦ˆë‚˜", value: 2903 },
      { src: "images/ë‚˜ê¸°ì‚¬.webp", title: "ë‚˜ê¸°ì‚¬", value: 2203 },
      { src: "images/ë…¸ì¡°ë¯¸.webp", title: "ë…¸ì¡°ë¯¸", value: 3780 },
      { src: "images/íˆì¹´ë¦¬.webp", title: "íˆì¹´ë¦¬", value: 3664 },
      { src: "images/ì•„ì¦ˆì‚¬.webp", title: "ì•„ì¦ˆì‚¬", value: 1998 },
      { src: "images/ì„¸ë¦¬ì¹´.webp", title: "ì„¸ë¦¬ì¹´", value: 2097 },
      { src: "images/í•˜ë£¨ì¹´.webp", title: "í•˜ë£¨ì¹´", value: 1344 },
      { src: "images/ì´ì˜¤ë¦¬.webp", title: "ì´ì˜¤ë¦¬", value: 2771 },
      { src: "images/ì´ë¡œí•˜.webp", title: "ì´ë¡œí•˜", value: 2076 },
      { src: "images/ë‚˜ì¸ .webp", title: "ë‚˜ì¸ ", value: 1695 },
      { src: "images/ì´ì¹˜ì¹´.webp", title: "ì´ì¹˜ì¹´", value: 2071 },
      { src: "images/ìœ ì¦ˆ.webp", title: "ìœ ì¦ˆ", value: 1738 },
      { src: "images/ì¿ ë¡œì½”.webp", title: "ì‹œë¡œì½”*í…ŒëŸ¬", value: 1816 },
      { src: "images/í‚¤ì¿„.webp", title: "í‚¤ì¿„", value: 1638 },
      { src: "images/ì´ë¶€í‚¤.webp", title: "ì´ë¶€í‚¤", value: 3317 },
      { src: "images/ì‚¬í‚¤.webp", title: "ì‚¬í‚¤", value: 1971 },
      { src: "images/ë ˆì´ì‚¬.webp", title: "ë ˆì´ì‚¬", value: 893 },
      { src: "images/ì½”ì½”ë‚˜.webp", title: "ì½”ì½”ë‚˜", value: 3137 },
      { src: "images/ì™€ì¹´ëª¨.webp", title: "ì™€ì¹´ëª¨", value: 1687 },
      { src: "images/í•˜ë£¨ë‚˜.webp", title: "í•˜ë£¨ë‚˜", value: 1199 },
      { src: "images/íˆë¹„í‚¤.webp", title: "íˆë¹„í‚¤", value: 1132 },
      { src: "images/ì½”ìœ í‚¤.webp", title: "ì½”ìœ í‚¤", value: 944 },
      { src: "images/ì•„ì¸ ì½”.webp", title: "ì•„ì¸ ì½”", value: 916 },
      { src: "images/ìŠŒ.webp", title: "ìŠŒ", value: 2707 },
      { src: "images/ìš”ì‹œë¯¸.webp", title: "ìš”ì‹œë¯¸", value: 833 },
      { src: "images/ì¸ ë£¨ê¸°.webp", title: "ì¸ ë£¨ê¸°", value: 703 },
      { src: "images/íˆìš”ë¦¬.webp", title: "íˆìš”ë¦¬", value: 1151 },
      { src: "images/ì„¸ë¦¬ë‚˜.webp", title: "ì„¸ë¦¬ë‚˜", value: 1445 },
      { src: "images/ë‹ˆì•¼ë‹ˆì•¼.webp", title: "ë‹ˆì•¼ë‹ˆì•¼ êµìˆ˜", value: 1648 },
      { src: "images/ì—ì´ë¯¸.webp", title: "ì—ì´ë¯¸", value: 1231 },
      { src: "images/í›„ìš°ì¹´.webp", title: "í›„ìš°ì¹´", value: 826 },
      { src: "images/íˆë§ˆë¦¬.webp", title: "íˆë§ˆë¦¬", value: 978 },
      { src: "images/ì‚¬ì¿ ë¼ì½”.webp", title: "ì‚¬ì¿ ë¼ì½”", value: 1404 },
      { src: "images/ë¯¸ì‚¬í‚¤.webp", title: "ë¯¸ì‚¬í‚¤", value: 480 },
      { src: "images/ì¸ ë°”í‚¤.webp", title: "ì¸ ë°”í‚¤", value: 1696 },
      { src: "images/í•˜ë ˆ.webp", title: "í•˜ë ˆ", value: 699 },
      { src: "images/ì•„ì´ë¦¬.webp", title: "ì•„ì´ë¦¬", value: 852 },
      { src: "images/ë§ˆí‚¤.webp", title: "ë§ˆí‚¤", value: 677 },
      { src: "images/ì•„ì•¼ë„¤.webp", title: "ì•„ì•¼ë„¤", value: 1013 },
      { src: "images/í›„ë¶€í‚¤.webp", title: "í›„ë¶€í‚¤", value: 930 },
      { src: "images/ìœ ë©”.webp", title: "ìœ ë©”", value: 669 },
      { src: "images/ì•„ì¹´ë„¤.webp", title: "ì•„ì¹´ë„¤", value: 1210 },
      { src: "images/ì‹œêµ¬ë ˆ.webp", title: "ì‹œêµ¬ë ˆ", value: 678 },
      { src: "images/ì¹´ìŠ¤ë¯¸.webp", title: "ì¹´ìŠ¤ë¯¸", value: 592 },
      { src: "images/ëª¨ì—.webp", title: "ëª¨ì—", value: 1255 },
      { src: "images/íˆë‚˜íƒ€.webp", title: "íˆë‚˜íƒ€", value: 1005 },
      { src: "images/ì¼€ì´.webp", title: "ì¼€ì´", value: 459 },
      { src: "images/ì•„í‚¤ë¼.webp", title: "ì•„í‚¤ë¼", value: 430 },
      { src: "images/ì¤€ì½”.webp", title: "ì¤€ì½”", value: 544 },
      { src: "images/ì •ì˜ì‹¤í˜„ë¶€.webp", title: "ì •ì˜ì‹¤í˜„ë¶€ ëª¨ë¸Œ", value: 1136 },
      { src: "images/ìŠˆë¡œ.webp", title: "ìŠˆë¡œ", value: 698 },
      { src: "images/í‚¤ë¦¬ë…¸.webp", title: "í‚¤ë¦¬ë…¸", value: 464 },
      { src: "images/ì¹˜ì„¸.webp", title: "ì¹˜ì„¸", value: 726 },
      { src: "images/ì‚¬ì¸ í‚¤.webp", title: "ì‚¬ì¸ í‚¤", value: 1066 },
      { src: "images/ì¹´ì—ë°.webp", title: "ì¹´ì—ë°", value: 1728 },
      { src: "images/ì¹˜íˆë¡œ.webp", title: "ì¹˜íˆë¡œ", value: 649 },
      { src: "images/ë§ˆì½”í† .webp", title: "ë§ˆì½”í† ", value: 302 },
      { src: "images/í‚¤ë¼ë¼.webp", title: "í‚¤ë¼ë¼", value: 929 },
      { src: "images/ì¹´ì•¼.webp", title: "ì¹´ì•¼", value: 470 },
      { src: "images/ì•„ì˜¤ë°”.webp", title: "ì•„ì˜¤ë°”", value: 613 },
      { src: "images/ë¯¸ë„¤.webp", title: "ë¯¸ë„¤", value: 651 },
      { src: "images/ì½”í† ë¦¬.webp", title: "ì½”í† ë¦¬", value: 471 },
      { src: "images/ìœ ì¹´ë¦¬.webp", title: "ìœ ì¹´ë¦¬", value: 503 },
      { src: "images/ì—ë¦¬.webp", title: "ì—ë¦¬", value: 713 },
      { src: "images/ìŠ¤ì¦ˆë¯¸.webp", title: "ìŠ¤ì¦ˆë¯¸", value: 138 },
      { src: "images/ë‚˜êµ¬ì‚¬.webp", title: "ë‚˜êµ¬ì‚¬", value: 346 },
      { src: "images/ë¯¸ì¹˜ë£¨.webp", title: "ë¯¸ì¹˜ë£¨", value: 368 },
      { src: "images/í•˜ë‚˜ì—.webp", title: "í•˜ë‚˜ì—", value: 887 },
      { src: "images/ë£¨ë¯¸.webp", title: "ë£¨ë¯¸", value: 610 },
      { src: "images/ìš°íƒ€í•˜.webp", title: "ìš°íƒ€í•˜", value: 200 },
      { src: "images/ì¹˜ë‚˜ì¸ .webp", title: "ì¹˜ë‚˜ì¸ ", value: 737 },
      { src: "images/ì¹´í˜¸.webp", title: "ì¹´í˜¸", value: 667 },
      { src: "images/ë¦°.webp", title: "ë¦°", value: 796 },
      { src: "images/ë‹ˆì½”.webp", title: "ë‹ˆì½”", value: 443 },
      { src: "images/ì„¸ë‚˜.webp", title: "ì„¸ë‚˜", value: 404 },
      { src: "images/ì•„ì˜¤ì´.webp", title: "ì•„ì˜¤ì´", value: 562 },
      { src: "images/ì¹´ë…¸ì—.webp", title: "ì¹´ë…¸ì—", value: 412 },
      { src: "images/ì†Œë¼.webp", title: "ì†Œë¼", value: 809 },
      { src: "images/ë§ˆì‹œë¡œ.webp", title: "ë§ˆì‹œë¡œ", value: 392 },
      { src: "images/ì•„ì¹´ë¦¬.webp", title: "ì•„ì¹´ë¦¬", value: 489 },
      { src: "images/ë ˆì´ì£ .webp", title: "ë ˆì´ì£ ", value: 709 },
      { src: "images/ì´ì¦ˆë¯¸.webp", title: "ì´ì¦ˆë¯¸", value: 331 },
      { src: "images/ì½”íƒ€ë§ˆ.webp", title: "ì½”íƒ€ë§ˆ", value: 176 },
      { src: "images/ì¸ ì¿ ìš”.webp", title: "ì¸ ì¿ ìš”", value: 453 },
      { src: "images/ë¯¸ëª¨ë¦¬.webp", title: "ë¯¸ëª¨ë¦¬", value: 479 },
      { src: "images/ì²´ë¦¬ë…¸.webp", title: "ì²´ë¦¬ë…¸", value: 238 },
      { src: "images/ë©”êµ¬.webp", title: "ë©”êµ¬", value: 461 },
      { src: "images/ë§ˆë¦¬ë‚˜.webp", title: "ë§ˆë¦¬ë‚˜", value: 444 },
      { src: "images/ë Œê²Œ.webp", title: "ë Œê²Œ", value: 272 },
      { src: "images/ì¹˜ì•„í‚¤.webp", title: "ì¹˜ì•„í‚¤", value: 247 },
      { src: "images/ì‹œì¦ˆì½”.webp", title: "ì‹œì¦ˆì½”", value: 454 },
      { src: "images/ì£¼ë¦¬.webp", title: "ì£¼ë¦¬", value: 233 },
      { src: "images/ë‹ˆì•¼.webp", title: "ë‹ˆì•¼", value: 451 },
      { src: "images/ì˜¤í† ê¸°.webp", title: "ì˜¤í† ê¸°", value: 285 },
      { src: "images/ìš°ë¯¸ì¹´.webp", title: "ìš°ë¯¸ì¹´", value: 198 },
      { src: "images/ë…¸ë„ì¹´.webp", title: "ë…¸ë„ì¹´", value: 163 },
      { src: "images/ì¿ ë£¨ë¯¸.webp", title: "ì¿ ë£¨ë¯¸", value: 222 },
      { src: "images/ë¯¸ë‚˜.webp", title: "ë¯¸ë‚˜", value: 165 },
      { src: "images/ìœ í‚¤ë…¸.webp", title: "ìœ í‚¤ë…¸", value: 141 },
      { src: "images/ì•„ì¸.webp", title: "ì•„ì¸", value: 292 },
      { src: "images/ë¯¸ë…¸ë¦¬.webp", title: "ë¯¸ë…¸ë¦¬", value: 76 },
      { src: "images/ìŠ¤ì˜¤ìš°.webp", title: "ìŠ¤ì˜¤ìš°", value: 206 },
      { src: "images/ì½”ë…¸ì¹´.webp", title: "ì½”ë…¸ì¹´", value: 127 },
      { src: "images/ëª¨ë¯¸ì§€.webp", title: "ëª¨ë¯¸ì§€", value: 182 },
      { src: "images/ì¹´êµ¬ì•¼.webp", title: "ì¹´êµ¬ì•¼", value: 298 },
      { src: "images/ìŠ¤ë¯¸ë ˆ.webp", title: "ìŠ¤ë¯¸ë ˆ", value: 192 },
      { src: "images/íƒ€ì¹´ë„¤.webp", title: "íƒ€ì¹´ë„¤", value: 202 },
      { src: "images/ì‚¬ì•¼.webp", title: "ì‚¬ì•¼", value: 170 },
      { src: "images/ì´í•™ìƒíšŒì¥.webp", title: "ì´í•™ìƒíšŒì¥", value: 151 },
      { src: "images/ë©”ë£¨.webp", title: "ë©”ë£¨", value: 161 },
      { src: "images/ëª¨ëª¨ì¹´.webp", title: "ëª¨ëª¨ì¹´", value: 275 },
      { src: "images/ì—ë¦¬ì¹´.webp", title: "ì—ë¦¬ì¹´", value: 137 },
      { src: "images/ë¼ë¸Œ.webp", title: "ë¼ë¸Œ", value: 67 },
      { src: "images/í† ëª¨ì—.webp", title: "í† ëª¨ì—", value: 183 },
      { src: "images/ì†Œí”„.webp", title: "ì†Œí”„", value: 207 },
      { src: "images/ìŠ¤ì¼€ë°˜.webp", title: "ìŠ¤ì¼€ë°˜", value: 52 },
      { src: "images/ì¹´ì´.webp", title: "ì¹´ì´", value: 81 },
      { src: "images/ì‹œë¯¸ì½”.webp", title: "ì‹œë¯¸ì½”", value: 100 },
      { src: "images/ì˜¤ë¥´.webp", title: "ì˜¤ë¥´", value: 157 },
      { src: "images/ì•„ì¼€ë¯¸.webp", title: "ì•„ì¼€ë¯¸", value: 112 },
      { src: "images/í”¼ë‚˜.webp", title: "í”¼ë‚˜", value: 101 },
      { src: "images/ë°œí‚¤ë¦¬.webp", title: "ë°œí‚¤ë¦¬ ëª¨ë¸Œ", value: 88 },
      { src: "images/ì¿ ì¦ˆë…¸í•˜.webp", title: "ì¿ ì¦ˆë…¸í•˜", value: 53 },
      { src: "images/ë ˆì´.webp", title: "ë ˆì´", value: 79 },
      { src: "images/ì•„ì•¼ë©”.webp", title: "ì•„ì•¼ë©”", value: 26 },
      { src: "images/ìŠ¤ëª¨ëª¨.webp", title: "ìŠ¤ëª¨ëª¨", value: 95 },
      { src: "images/ì½”ì¿ ë¦¬ì½”.webp", title: "ì½”ì¿ ë¦¬ì½”", value: 67 },
      { src: "images/ë§ì¿ íŠ¸.webp", title: "ë§ì¿ íŠ¸", value: 33 },
      { src: "images/ë ˆë‚˜.webp", title: "ë ˆë‚˜", value: 77 },
      { src: "images/ì¸ ë¬´ê¸°.webp", title: "ì¸ ë¬´ê¸°", value: 66 },
      { src: "images/ì•„ìë¯¸.webp", title: "ì•„ìë¯¸", value: 49 },
      { src: "images/ì¸ë ¥ê±°.webp", title: "ì¸ë ¥ê±° ëª¨ë¸Œ", value: 110 },
      { src: "images/ì•„ìœ ë¬´.webp", title: "ì•„ìœ ë¬´", value: 50 },
      { src: "images/ë¯¸ë¼ì´.webp", title: "ë¯¸ë¼ì´", value: 73 },
      { src: "images/ì•¼ì¿ ëª¨.webp", title: "ì•¼ì¿ ëª¨", value: 31 },
      { src: "images/ì„ ë„ë¶€.webp", title: "ì„ ë„ë¶€ ëª¨ë¸Œ", value: 18 },
      { src: "images/ì•„ë¼íƒ€.webp", title: "ì•„ë¼íƒ€", value: 34 },
      { src: "images/ì‹œë…¼.webp", title: "ì‹œë…¼", value: 45 },
      { src: "images/ë¯¸ìš”.webp", title: "ë¯¸ìš”", value: 47 },
      { src: "images/í•˜ì´ë„¤.webp", title: "í•˜ì´ë„¤", value: 6 },
      { src: "images/í­ì£¼ì¡±.webp", title: "í­ì£¼ì¡± ë³´ìŠ¤", value: 11 },
      { src: "images/ë§ˆì´.webp", title: "ë§ˆì´", value: 3 },
      { src: "images/ì¹´ì´í…ì ¸.webp", title: "ì¹´ì´í…ì ¸", value: 7 },
      { src: "images/ë² ì•„íŠ¸ë¦¬ì²´.webp", title: "ë² ì•„íŠ¸ë¦¬ì²´", value: 23 },
    ];
  
    let showNumbers = false;


    let left, right;
    let score = 0, streak = 0;
    let best = Number(localStorage.getItem("higher_best") || 0);
    let locked = false;         
    let awaitingNext = false;      
    let pendingGameOver = false;  
    let started = false;          

    let nextLeftCarry = null;

    const el = (id) => document.getElementById(id);
    const appRoot = el("appRoot");
    const scoreEl = el("score");
    const streakEl = el("streak");
    const bestEl = el("best");
    const leftCard = el("leftCard");
    const rightCard = el("rightCard");
    const leftImg = el("leftImg");
    const rightImg = el("rightImg");
    const leftTitle = el("leftTitle");
    const rightTitle= el("rightTitle");
    const leftNum = el("leftNum");
    const rightNum = el("rightNum");
    const leftNumBig= el("leftNumBig");
    const rightNumBig=el("rightNumBig");
    const skipBtn = el("skipBtn");
    const restartBtn= el("restartBtn");
    const overlay = el("gameover");
    const againBtn = el("againBtn");
    const closeBtn = el("closeBtn");
    const summary = el("summary");
    const intro = el("intro");
    const startBtn = el("startBtn");
    const justSeeBtn = el("justSeeBtn");

    const hintEl = document.querySelector(".hint");
    const defaultHintHTML = hintEl ? hintEl.innerHTML : "";

    function setHintComparing(mode){
      if (!hintEl) return;
      if (mode === "correct") {
        hintEl.innerHTML = `ìˆ«ìë¥¼ ë¹„êµí•´ë³´ì„¸ìš”. <b>í´ë¦­/Enter/Space</b>ë¡œ <b>ë‹¤ìŒ ë¼ìš´ë“œ</b>ë¡œ ì§„í–‰í•©ë‹ˆë‹¤.`;
      } else if (mode === "wrong") {
        hintEl.innerHTML = `ìˆ«ìë¥¼ ë¹„êµí•´ë³´ì„¸ìš”. <b>í´ë¦­/Enter/Space</b>ë¡œ <b>ê²°ê³¼ì°½(ê²Œì„ì˜¤ë²„)</b>ì´ ì—´ë¦½ë‹ˆë‹¤.`;
      } else {
        hintEl.innerHTML = defaultHintHTML;
      }
    }

    const randIndex = () => Math.floor(Math.random() * DATASET.length);
    const randItem = () => DATASET[randIndex()];
    const preload = (srcs) => srcs.forEach(s => { const img = new Image(); img.src = s; });

    function pickNewRight(exclude) {
      if (DATASET.length < 2) throw new Error("DATASETì— ìµœì†Œ 2ê°œ ì´ìƒì˜ í•­ëª©ì´ í•„ìš”í•©ë‹ˆë‹¤.");
      let candidate = randItem();
      let guard = 0;
      while ((candidate === exclude || candidate.value === exclude.value) && guard++ < 100) {
        candidate = randItem();
      }
      return candidate;
    }

    function randPair() {
      if (DATASET.length < 2) throw new Error("DATASETì— ìµœì†Œ 2ê°œ ì´ìƒì˜ í•­ëª©ì´ í•„ìš”í•©ë‹ˆë‹¤.");
      let a = randItem();
      let b = randItem();
      let guard = 0;
      while ((b === a || b.value === a.value) && guard++ < 100) {
        b = randItem();
      }
      return [a, b];
    }

    function updateStats() {
      scoreEl.textContent = `ì ìˆ˜ ${score}`;
      streakEl.textContent = `ì—°ì† ${streak}`;
      bestEl.textContent = `ìµœê³  ${best}`;
    }
    function setCard(side, item) {
      const img = side === "left" ? leftImg : rightImg;
      const title = side === "left" ? leftTitle : rightTitle;
      const chip = side === "left" ? leftNum : rightNum;
      const big = side === "left" ? leftNumBig: rightNumBig;
      img.src = item.src;
      img.alt = item.title || "ì‚¬ì§„";
      title.textContent = item.title || "";
      chip.textContent = showNumbers ? item.value : "?";
      if (big) big.textContent = showNumbers ? item.value : "?";
    }
    function clearEffects() {
      [leftCard, rightCard].forEach(c => {
        c.classList.remove("correct","wrong","reveal");
        c.setAttribute("aria-disabled","false");
      });
    }

    function nextRound(force = false, leftFixed = null) {
      if (!started && !force) return;
      if (locked && !force) return;
      clearEffects();

      if (leftFixed) {
        left = leftFixed;
        right = pickNewRight(left);
      } else {
        [left, right] = randPair();
      }

      setCard("left", left);
      setCard("right", right);
      preload([left.src, right.src]);
    }

    function choose(which) {
      if (!started) return;
      if (locked) return;
      locked = true;

      const pick = which === "left" ? left : right;
      const other = which === "left" ? right : left;

      [leftCard, rightCard].forEach(c => c.classList.add("reveal"));
      leftNum.textContent = left.value;
      rightNum.textContent = right.value;
      if (leftNumBig) leftNumBig.textContent = left.value;
      if (rightNumBig) rightNumBig.textContent = right.value;

      const isCorrect = pick.value > other.value;
      const pickedCard = which === "left" ? leftCard : rightCard;
      const otherCard  = which === "left" ? rightCard : leftCard;

      pickedCard.classList.add(isCorrect ? "correct" : "wrong");
      otherCard.classList.add(isCorrect ? "wrong" : "correct");
      [leftCard, rightCard].forEach(c => c.setAttribute("aria-disabled","true"));

      setTimeout(() => {
        if (isCorrect) {
          score += 1;
          streak += 1;
          updateStats();
          awaitingNext = true;
          pendingGameOver = false;

          nextLeftCarry = right;  
          setHintComparing("correct");
        } else {
          awaitingNext = true;
          pendingGameOver = true;
          setHintComparing("wrong");
        }
      }, 400);
    }

    function proceedAfterReveal() {
      if (!awaitingNext) return;
      awaitingNext = false;
      setHintComparing(null);
      if (pendingGameOver) {
        pendingGameOver = false;
        gameOver();
        return;
      }
      locked = false;

      if (nextLeftCarry) {
        nextRound(true, nextLeftCarry);
        nextLeftCarry = null; // ì†Œëª¨
      } else {
        nextRound(true);
      }
    }

    function gameOver() {
      if (score > best) {
        best = score;
        localStorage.setItem("higher_best", String(best));
      }
      updateStats();
      summary.textContent = `ì´ë²ˆ ì ìˆ˜ ${score} â€¢ ìµœê³ ê¸°ë¡ ${best}`;
      overlay.classList.add("show");
      overlay.setAttribute("aria-hidden","false");
    }

    function restart() {
      score = 0;
      streak = 0;
      locked = false;
      awaitingNext = false;
      pendingGameOver = false;
      nextLeftCarry = null;  
      overlay.classList.remove("show");
      overlay.setAttribute("aria-hidden","true");
      setHintComparing(null);
      updateStats();
      nextRound(true);      
    }

    leftCard.addEventListener("click", () => choose("left"));
    rightCard.addEventListener("click", () => choose("right"));

    document.addEventListener("click", (e) => {
      const goShowing = overlay && overlay.classList.contains('show');
      if (awaitingNext && !goShowing) {
        const id = (e.target.id || '');
        if (!['skipBtn','restartBtn','againBtn','closeBtn','leftCard','rightCard','startBtn','justSeeBtn'].includes(id)) {
          proceedAfterReveal();
        }
      }
    });

    window.addEventListener("keydown", (e) => {
      const key = e.key?.toLowerCase();

      if (!started) {
        if (key === "enter" || key === " ") {
          startGame();
          e.preventDefault();
        }
        return;
      }

      if (key === "arrowleft") choose("left");
      if (key === "arrowright") choose("right");
      if (key === "r") restart();
      if (key === "d") {
        showNumbers = !showNumbers;
        leftNum.textContent = showNumbers ? (left?.value ?? "?") : "?";
        rightNum.textContent = showNumbers ? (right?.value ?? "?") : "?";
        if (leftNumBig) leftNumBig.textContent = showNumbers ? (left?.value ?? "?") : "?";
        if (rightNumBig) rightNumBig.textContent = showNumbers ? (right?.value ?? "?") : "?";
      }
      if (awaitingNext && (key === "enter" || key === " ")) {
        e.preventDefault();
        proceedAfterReveal();
      }
    });


    skipBtn.addEventListener("click", () => {
      if (awaitingNext) {
        proceedAfterReveal();
        return;
      }
      if (!locked) {
        nextLeftCarry = null; 
        nextRound(true);
      }
    });

    restartBtn.addEventListener("click", restart);
    againBtn?.addEventListener("click", restart);
    closeBtn?.addEventListener("click", () => {
      overlay.classList.remove("show");
      overlay.setAttribute("aria-hidden","true");
    });

    function startGame() {
      if (started) return;
      started = true;
      intro.classList.remove("show");
      intro.setAttribute("aria-hidden","true");
      appRoot.setAttribute("aria-hidden","false");
      restart(); 
    }
    startBtn.addEventListener("click", startGame);

    justSeeBtn.addEventListener("click", () => {
      alert("ê·œì¹™ ì˜ˆì‹œ:\n1) ë‘ ì‚¬ì§„ ì¤‘ íŒ¬ì•„íŠ¸ê°€ ë” ë§ì€ ìª½ì„ ê³ ë¥´ì„¸ìš”.\n2) ì •ë‹µì´ë©´ ë‹¤ìŒ ë¼ìš´ë“œë¡œ, ì˜¤ë‹µì´ë©´ ê²°ê³¼ì°½ì´ ëœ¹ë‹ˆë‹¤.\n3)");
    });

    (function init() {
      best = Number(localStorage.getItem("higher_best") || 0);
      updateStats();
      appRoot.setAttribute("aria-hidden","true");
    })();
  </script>
</body>
</html>
